!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.smartdesign=t():e.smartdesign=t()}(self,(function(){return function(){"use strict";var e={449:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UUID=void 0;t.UUID=function(){if(void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var e=new Uint16Array(8);window.crypto.getRandomValues(e);var t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}var n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}},184:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createBroadcastEndPoint=t.BroadcastChannelPolyfill=void 0;var r=n(449),o=function(){function e(e){var t=this;this.listeners=[],this.storage=window.localStorage,this.listening=!0,this._tabId=(0,r.UUID)(),this.prefix="__sd_interop_"+e,window.addEventListener("storage",(function(e){if(t.listening&&0===e.key.indexOf(t.prefix))try{JSON.parse(e.newValue)._tabId!==t._tabId&&t.listeners.forEach((function(t){t({data:e.newValue})}))}catch(e){console.error("An exception occurred while receiving a broadcasted message!")}}))}return e.prototype.postMessage=function(e){var t=this.prefix+(0,r.UUID)();this.listening=!1;try{if(null===this.storage.getItem(t)){var n=JSON.parse(e);n._tabId=this._tabId,this.storage.setItem(t,JSON.stringify(n)),this.storage.removeItem(t)}}catch(e){console.error("Broadcast polyfill can not function properly!")}this.listening=!0},e.prototype.addEventListener=function(e,t){"message"===e&&this.listeners.push(t)},e.prototype.removeEventListener=function(e,t){if("message"===e){var n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n)}},e}();t.BroadcastChannelPolyfill=o;t.createBroadcastEndPoint=function(e){return"BroadcastChannel"in window?new BroadcastChannel(e):new o(e)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}var r={};return function(){var e=r;Object.defineProperty(e,"__esModule",{value:!0});var t=n(184),o=n(449),i=[window.location.origin,"WHITELIST"],a=(0,t.createBroadcastEndPoint)("smartdesign-interop"),s=new URL(document.referrer).origin,d=(0,o.UUID)();a.addEventListener("message",(function(e){if(i.indexOf(s)>-1)try{var t=e.data?JSON.parse(e.data):void 0;(t&&null==t.target||t.target===d)&&window.parent.postMessage(JSON.stringify(t),s)}catch(e){console.error("An exception occurred while broadcasting the message!")}})),window.addEventListener("message",(function(e){if(i.indexOf(e.origin)>-1){var t=e.data?JSON.parse(e.data):void 0;if(t){if(t.payload&&(t.payload.origin=e.origin),null==t.source)t.source=d;else{var n=t.source;t.source=d,t.target=n}a.postMessage(JSON.stringify(t))}}})),window.parent.postMessage("ready",s)}(),r}()}));
//# sourceMappingURL=tunnel.js.map