!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.smartdesign=e():t.smartdesign=e()}(self,(function(){return function(){"use strict";var t={641:function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Communicator=void 0;var i=r(73),a=r(991),s=function(){function t(t,e,r,n){void 0===n&&(n=1e4),this.targetOrigin=t,this.target=e,this.source=r,this.defaultTimeout=n}return t.prototype.parseJSON=function(t){try{return JSON.parse(t)}catch(t){return}},t.prototype.unwrapMessage=function(t){return this.parseJSON(t)},t.prototype.wrapMessage=function(t){return JSON.stringify(t)},t.prototype.expose=function(t,e){var r=this,s=function(s){if(s.source===r.target()){var u=r.unwrapMessage(s.data);if(u){var c=u.params;e===u.action&&function(r){return new Promise((function(i,a){try{i(t[e].apply(t,o([],n(r),!1)))}catch(t){a(t)}}))}(c).then((function(t){return new a.SDMessage(e,void 0,void 0,void 0,i.MessageStatus.OK,t)})).catch((function(t){return console.error("Remote method invocation failed.",t),new a.SDMessage(e,void 0,void 0,t instanceof Error?t.message||"ERROR":t,i.MessageStatus.ERROR_UNKNOWN,void 0)})).then((function(t){t.tag=u.tag,t.source=u.source,t.target=u.target,r.target().postMessage(r.wrapMessage(t),r.targetOrigin)}))}}};return this.source().addEventListener("message",s,!1),function(){return r.source().removeEventListener("message",s)}},t.prototype.invoke=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=null,s=new Promise((function(r,n){a=setTimeout((function(){n(new Error("Remote method ("+t+") invocation failed: Timeout"))}),e.defaultTimeout)})),u=this.invokeRelaxed.apply(this,o([t],n(r),!1));return u.then((function(){return clearTimeout(a)}),(function(){return clearTimeout(a)})),Promise.race([s,u])},t.prototype.invokeRelaxed=function(t){for(var e=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return new Promise((function(a,s){var u=e.postInternal.apply(e,o([t],n(r),!1));e.source().addEventListener("message",(function t(r){if(r.source===e.target()){var n=e.unwrapMessage(r.data);if(n){if(u.tag!==n.tag)return;e.source().removeEventListener("message",t),n.status!==i.MessageStatus.OK||n.error?s(new Error(n.error||n.payload)):a(n.payload)}}}),!1)}))},t.prototype.postInternal=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=new a.SDMessage(t,e,void 0,void 0,void 0,void 0);return this.target().postMessage(this.wrapMessage(n),this.targetOrigin),n},t.prototype.post=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.postInternal.apply(this,o([t],n(e),!1))},t}();e.Communicator=s},21:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMethods=void 0;e.getMethods=function(t){for(var e=[],r=function(e){return!function(t){return"constructor"===t}(e)&&function(e){return"function"==typeof t[e]}(e)};(t=Object.getPrototypeOf(t))&&t!==Object.prototype;){var n=Object.getOwnPropertyNames(t).filter((function(t){return r(t)}));e=e.concat(n)}return e.sort().filter((function(t,e,r){return t!==r[e+1]}))}},73:function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.MessageStatus=e.Tier=void 0,function(t){t[t.INTERAPP=0]="INTERAPP",t[t.CONTAINER=1]="CONTAINER",t[t.BROADCAST=2]="BROADCAST"}(r||(e.Tier=r={})),function(t){t[t.OK=0]="OK",t[t.NOT_INITIALIZED=1]="NOT_INITIALIZED",t[t.NOT_AUTHORIZED=2]="NOT_AUTHORIZED",t[t.INVALIDATED=3]="INVALIDATED",t[t.ERROR_NOT_AVAILABLE=248]="ERROR_NOT_AVAILABLE",t[t.ERROR_HOST=249]="ERROR_HOST",t[t.ERROR_TIMEOUT=250]="ERROR_TIMEOUT",t[t.ERROR_INVALID_PARAMS=251]="ERROR_INVALID_PARAMS",t[t.ERROR_NO_SUCH_METHOD=252]="ERROR_NO_SUCH_METHOD",t[t.ERROR_SERVICE=253]="ERROR_SERVICE",t[t.ERROR_PARSE=254]="ERROR_PARSE",t[t.ERROR_UNKNOWN=255]="ERROR_UNKNOWN"}(n||(e.MessageStatus=n={}));var o=function(){function t(t,e,n,o,i,a){void 0===e&&(e={}),void 0===a&&(a={}),this.action=t,this.params=e,this.meta=n,this.error=o,this.status=i,this.payload=a,this.tag=this.UUID(),this.meta={apiVersion:2,tier:r.INTERAPP,timestamp:(new Date).getTime()}}return t.prototype.setTier=function(t){t&&(this.meta.tier=t)},t.prototype.UUID=function(){if(void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var t=new Uint16Array(8);window.crypto.getRandomValues(t);var e=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return e(t[0])+e(t[1])+"-"+e(t[2])+"-"+e(t[3])+"-"+e(t[4])+"-"+e(t[5])+e(t[6])+e(t[7])}var r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},t}();e.Message=o},991:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SDMessage=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(73).Message);e.SDMessage=i},931:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTunnel=void 0;e.createTunnel=function(t,e){void 0===t&&(t="");var r=document.createElement("iframe");return r.tabIndex=-1,r.style.width="0",r.style.height="0",r.style.margin="0",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.zIndex="-1",r.style.pointerEvents="none",t.lastIndexOf("/")===t.length-1&&(t=t.substring(0,t.length-1)),r.setAttribute("src",t+"/apps/content/api/tunnel.html"),window.addEventListener("message",(function(t){"ready"===t.data&&e&&e()})),r}},226:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createCommunicator=e.expose=e.invokeMethod=e.createTunnel=void 0;var s=r(641);o(r(641),e);var u=r(931),c=r(21);e.createTunnel=function(t,e){return void 0===t&&(t=""),(0,u.createTunnel)(t,e)};e.invokeMethod=function(t,e,r,n,o){var u=new s.Communicator(t,e,r);return u.invoke.apply(u,a([n],i(o||[]),!1))};e.expose=function(t,r,n,o,i){void 0===o&&(o=function(){return window}),void 0===i&&(i=1e4);var a=(0,c.getMethods)(r).map((function(a){return(0,e.createCommunicator)(t,n,o,i).expose(r,a)}));return function(){return a.forEach((function(t){return t()}))}};e.createCommunicator=function(t,e,r,n){return void 0===r&&(r=function(){return window}),void 0===n&&(n=1e4),new s.Communicator(t,e,r,n)}}},e={};var r=function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}(226);return r}()}));
//# sourceMappingURL=smartdesignhost.js.map