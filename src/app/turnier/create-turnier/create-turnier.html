<!DOCTYPE html>
<html lang="de">
<meta charset="UTF-8" />

<script src="../../../../node_modules/@smartdesign/header-layout/dist/header-layout-with-externals.js"></script>
<script src="../../../../node_modules/@smartdesign/button/dist/button-with-externals.js"></script>
<script src="../../../../node_modules/@smartdesign/lit-input/dist/input-with-externals.js"></script>


<link rel="stylesheet" href="../../../style/style.css">

<div class="examples">

  <form id="tournamentForm">

  <div class="example-container">
    <span>Turniername</span>
    <sd-lit-input id="turnierName" type="text" name="turnierName" required  class="smartdesign-global-smartsearch" placeholder="Fußballturnier Controlling"></sd-lit-input>
  </div>

    <div class="example-container">
      <span>Startdatum</span>
      <sd-lit-input type="date" id="startDatum" name="startDatum" required class="smartdesign-global-smartsearch"></sd-lit-input>
    </div>

    <div class="example-container">
      <span>Anmeldeschluss</span>
      <sd-lit-input type="date" id="endDatum" name="endDatum" required class="smartdesign-global-smartsearch"></sd-lit-input>
    </div>

    <div class="example-container">
      <span>Veranstaltungsort</span>
      <sd-lit-input id="veranstaltungsort" type="text" name="veranstaltungsort" required  class="smartdesign-global-smartsearch" placeholder="Karlsruhe"></sd-lit-input>
    </div>

    <div class="example-container">
      <span>Startzeit</span>
      <sd-lit-input id="startZeit" type="time" name="startZeit" required  class="smartdesign-global-smartsearch"></sd-lit-input>
    </div>

    <div class="example-container">
      <span>Kosten</span>
      <sd-lit-input type="text" id="kosten" name="kosten" required placeholder="€" oninput="formatCurrency(this)" class="smartdesign-global-smartsearch"></sd-lit-input>
    </div>

    <!--Darstellung als Dezimalzahl-->

    <script>
      function formatCurrency(input) {
        // Beispiel: Formatierung auf zwei Dezimalstellen
        input.value = parseFloat(input.value).toFixed(2);
      }
    </script>

  </form>
</div>


<div class="parent-container">
  <sd-button type="submit" primary onclick="validateForm()" > Turnier erstellen </sd-button>
</div>

<script>
  function validateForm() {
    const inputs = document.querySelectorAll('.example-container sd-lit-input');

    for (const input of inputs) {
      if (!input.value) {
        alert('Bitte füllen Sie alle Felder aus.');
        return;
      }}}
</script>

    <script>
      document
        .getElementById("tournamentForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const tournamentData = {
            turnierName: document.getElementById("turnierName").value,
            startDatum: document.getElementById("startDatum").value,
            endDatum: document.getElementById("endDatum").value,
            veranstaltungsort: document.getElementById("veranstaltungsort").value,
            startZeit: document.getElementById("startZeit").value,
            kosten: document.getElementById("kosten").value
          };

          fetch("https://turniersystem.onrender.com/create-turnier", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(tournamentData),
          })
            .then((response) => {
              if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
              }
              return response.json();
            })
            .then((data) => {
              console.log("Turnier erstellt:", data);
              alert("Turnier erfolgreich erstellt!");
            })
            .catch((error) => {
              console.error("Fehler beim Senden der Daten:", error);
              alert(
                "Fehler beim Erstellen des Turniers. Bitte versuche es erneut."
              );
            });
        });
    </script>
  </body>
  </sd-header-layout>
</html>


<!--TODO create-turnier.js anbinden-->
<!--DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>Turnier erstellen</title>
  </head>
  <body>
    <h1>Turnier erstellen</h1>

    <form id="tournamentForm">
      <label for="tournamentName">Turniername:</label>
      <input type="text" id="tournamentName" name="tournamentName" required />

      <label for="startDate">Startdatum:</label>
      <input type="date" id="startDate" name="startDate" required />

      <label for="endDate">Enddatum:</label>
      <input type="date" id="endDate" name="endDate" required />

      <label for="veranstaltungsort">Veranstaltungsort:</label>
      <input type="text" id="veranstaltungsort" name="veranstaltungsort" required />

      <button type="submit">Turnier erstellen</button>
    </form>

<script src="./create-turnier.js"></script>
    <script>
      console.log("JavaScript-Code wird ausgeführt.");
    </script>
  </body>
</html-->
